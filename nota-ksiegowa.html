<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generator Noty Ksiƒôgowej - FedEx</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            padding: 40px 20px;
            color: #fff;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
        }

        header h1 {
            font-size: 2rem;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        header p {
            color: #888;
            font-size: 1rem;
        }

        .back-link {
            display: inline-block;
            margin-bottom: 20px;
            color: #4fc3f7;
            text-decoration: none;
            font-size: 0.9rem;
        }

        .back-link:hover {
            text-decoration: underline;
        }

        .form-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 20px;
        }

        .form-card h2 {
            font-size: 1.2rem;
            margin-bottom: 20px;
            color: #fff;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-row.single {
            grid-template-columns: 1fr;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            color: #aaa;
            font-size: 0.85rem;
            margin-bottom: 6px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 12px 14px;
            color: #fff;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: rgba(102, 126, 234, 0.6);
            background: rgba(255, 255, 255, 0.12);
        }

        .form-group input::placeholder {
            color: #666;
        }

        .form-group select {
            cursor: pointer;
        }

        .form-group select option {
            background: #1e1e1e;
            color: #fff;
        }

        .readonly-field {
            background: rgba(102, 126, 234, 0.1) !important;
            border-color: rgba(102, 126, 234, 0.3) !important;
            color: #81c784 !important;
        }

        .hint {
            font-size: 0.75rem;
            color: #666;
            margin-top: 4px;
        }

        .buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .btn {
            flex: 1;
            padding: 14px 28px;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.3s ease;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
        }

        .btn-primary:hover {
            transform: scale(1.02);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .preview-section {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 16px;
            padding: 30px;
            margin-top: 30px;
        }

        .preview-section h3 {
            margin-bottom: 20px;
            color: #fff;
        }

        .info-box {
            background: rgba(33, 150, 243, 0.1);
            border: 1px solid rgba(33, 150, 243, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            color: #64b5f6;
            font-size: 0.9rem;
        }

        /* STYLE DLA PDF */
        .pdf-document {
            background: #fff;
            color: #000;
            padding: 40px;
            font-family: 'Times New Roman', Times, serif;
            font-size: 12pt;
            line-height: 1.5;
            width: 100%;
            max-width: 800px;
        }

        .pdf-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 40px;
        }

        .pdf-stamp {
            border: 2px dashed #999;
            padding: 15px 20px;
            text-align: center;
            color: #666;
            font-style: italic;
            font-size: 10pt;
            min-width: 180px;
        }

        .pdf-stamp .company-info {
            margin-top: 10px;
            font-style: normal;
            color: #000;
            font-size: 10pt;
        }

        .pdf-address {
            text-align: right;
            font-size: 11pt;
        }

        .pdf-address strong {
            font-size: 12pt;
        }

        .pdf-title {
            text-align: center;
            font-size: 18pt;
            font-weight: bold;
            margin: 40px 0 10px 0;
            letter-spacing: 2px;
        }

        .pdf-subtitle {
            text-align: center;
            margin-bottom: 30px;
            font-size: 11pt;
        }

        .pdf-intro {
            margin-bottom: 20px;
            font-size: 11pt;
        }

        .pdf-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .pdf-table th,
        .pdf-table td {
            border: 1px solid #000;
            padding: 15px;
            text-align: left;
            vertical-align: top;
        }

        .pdf-table th {
            background: #f0f0f0;
            font-weight: bold;
            font-size: 11pt;
        }

        .pdf-table .kwota-cell {
            text-align: center;
            font-weight: bold;
            font-size: 14pt;
            width: 120px;
            vertical-align: middle;
        }

        .pdf-table .tresc-cell {
            font-size: 11pt;
            line-height: 1.8;
        }

        .pdf-signatures {
            display: flex;
            justify-content: space-between;
            margin-top: 80px;
            padding: 0 30px;
        }

        .pdf-signature-box {
            text-align: center;
            width: 180px;
        }

        .pdf-signature-line {
            border-top: 1px solid #000;
            margin-top: 60px;
            padding-top: 8px;
            font-size: 10pt;
        }

        .pdf-signature-note {
            font-size: 8pt;
            color: #666;
            margin-top: 5px;
        }

        @media (max-width: 600px) {
            .form-row {
                grid-template-columns: 1fr;
            }

            .buttons {
                flex-direction: column;
            }

            .pdf-document {
                width: 100%;
                padding: 20px;
            }
        }

        /* PodglƒÖd na stronie */
        .preview-wrapper {
            background: #fff;
            border-radius: 8px;
            overflow: hidden;
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">‚Üê Powr√≥t do listy skrypt√≥w</a>
        
        <header>
            <h1>üìÑ Generator Noty Ksiƒôgowej</h1>
            <p>Generuj noty ksiƒôgowe dla odszkodowa≈Ñ FedEx</p>
        </header>

        <div class="info-box">
            üí° Wype≈Çnij formularz poni≈ºej. Numer konta bankowego jest ju≈º uzupe≈Çniony. Po wype≈Çnieniu kliknij "Generuj PDF" aby pobraƒá gotowy dokument.
        </div>

        <!-- DANE WYSTAWCY -->
        <div class="form-card">
            <h2>üè¢ Dane wystawcy noty</h2>
            <div class="form-row">
                <div class="form-group">
                    <label>Nazwa firmy</label>
                    <input type="text" id="wystawca_nazwa" placeholder="np. BL Logistics sp. z o.o.">
                </div>
                <div class="form-group">
                    <label>NIP</label>
                    <input type="text" id="wystawca_nip" placeholder="np. 1234567890">
                </div>
            </div>
            <div class="form-row single">
                <div class="form-group">
                    <label>Adres</label>
                    <input type="text" id="wystawca_adres" placeholder="np. ul. Czerska 8/7, 00-732 Warszawa">
                </div>
            </div>
        </div>

        <!-- DANE NOTY -->
        <div class="form-card">
            <h2>üìã Dane noty</h2>
            <div class="form-row">
                <div class="form-group">
                    <label>Numer noty</label>
                    <input type="text" id="nota_numer" placeholder="np. NK/01/2026">
                </div>
                <div class="form-group">
                    <label>Data wystawienia</label>
                    <input type="date" id="nota_data">
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label>Typ dokumentu</label>
                    <select id="nota_typ">
                        <option value="Orygina≈Ç">Orygina≈Ç</option>
                        <option value="Kopia">Kopia</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Rodzaj szkody</label>
                    <select id="szkoda_rodzaj">
                        <option value="uszkodzonƒÖ">uszkodzona przesy≈Çka</option>
                        <option value="zagubionƒÖ">zagubiona przesy≈Çka</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- DANE PRZESY≈ÅKI -->
        <div class="form-card">
            <h2>üì¶ Dane przesy≈Çki</h2>
            <div class="form-row">
                <div class="form-group">
                    <label>Numer przesy≈Çki</label>
                    <input type="text" id="przesylka_numer" placeholder="np. 794644790240">
                </div>
                <div class="form-group">
                    <label>Data nadania przesy≈Çki</label>
                    <input type="date" id="przesylka_data">
                </div>
            </div>
        </div>

        <!-- KWOTA -->
        <div class="form-card">
            <h2>üí∞ Kwota odszkodowania</h2>
            <div class="form-row">
                <div class="form-group">
                    <label>Kwota (PLN)</label>
                    <input type="number" id="kwota" step="0.01" placeholder="np. 1500.00">
                </div>
                <div class="form-group">
                    <label>Kwota s≈Çownie</label>
                    <input type="text" id="kwota_slownie" placeholder="np. tysiƒÖc piƒôƒáset z≈Çotych 00/100">
                    <span class="hint">Zostanie uzupe≈Çnione automatycznie lub wpisz rƒôcznie</span>
                </div>
            </div>
        </div>

        <!-- KONTO BANKOWE -->
        <div class="form-card">
            <h2>üè¶ Konto bankowe</h2>
            <div class="form-row single">
                <div class="form-group">
                    <label>Numer rachunku</label>
                    <input type="text" id="konto" value="48 1140 1140 0000 3902 8700 1033" class="readonly-field" readonly>
                    <span class="hint">Sta≈Çy numer konta - nie mo≈ºna edytowaƒá</span>
                </div>
            </div>
        </div>

        <div class="buttons">
            <button class="btn btn-secondary" onclick="resetForm()">üîÑ Wyczy≈õƒá formularz</button>
            <button class="btn btn-primary" onclick="generatePDF()">üì• Generuj PDF</button>
        </div>

        <!-- PODGLƒÑD -->
        <div class="preview-section">
            <h3>üëÅÔ∏è PodglƒÖd dokumentu</h3>
            <div class="preview-wrapper">
                <div class="pdf-document" id="preview">
                    <div class="pdf-header">
                        <div class="pdf-stamp">
                            (PieczƒÖtka firmowa<br>wystawcy noty)
                            <div class="company-info">
                                <span id="prev_firma"></span><br>
                                <span id="prev_adres"></span>
                            </div>
                        </div>
                        <div class="pdf-address">
                            <strong>Adresat:</strong><br>
                            <strong>FedEx Express Poland</strong><br>
                            ul. Annopol 19<br>
                            03-236 Warszawa
                        </div>
                    </div>

                    <div class="pdf-title">NOTA KSIƒòGOWA</div>
                    <div class="pdf-subtitle">
                        Nr <strong><span id="prev_numer">___</span></strong> z dnia <strong><span id="prev_data">___</span></strong><br>
                        <span id="prev_typ">Orygina≈Ç</span>
                    </div>

                    <p class="pdf-intro">Prosimy o zgodne z nami zaksiƒôgowanie nastƒôpujƒÖcych pozycji:</p>

                    <table class="pdf-table">
                        <tr>
                            <th>ObciƒÖ≈ºyli≈õmy</th>
                            <th>TRE≈öƒÜ</th>
                        </tr>
                        <tr>
                            <td class="kwota-cell">
                                <span id="prev_kwota">___</span> z≈Ç
                            </td>
                            <td class="tresc-cell">
                                ObciƒÖ≈ºamy Pa≈Ñstwa kwotƒÖ <strong><span id="prev_kwota2">___</span> z≈Ç</strong> 
                                (s≈Çownie: <em><span id="prev_slownie">___</span></em>)
                                z tytu≈Çu odszkodowania za <span id="prev_rodzaj">uszkodzonƒÖ</span> przesy≈Çkƒô 
                                nr <strong><span id="prev_przesylka">___</span></strong> 
                                z dnia <strong><span id="prev_przesylka_data">___</span></strong>.
                                <br><br>
                                Odszkodowanie prosimy przes≈Çaƒá na konto:<br>
                                <strong><span id="prev_konto">48 1140 1140 0000 3902 8700 1033</span></strong>
                            </td>
                        </tr>
                    </table>

                    <div class="pdf-signatures">
                        <div class="pdf-signature-box">
                            <div class="pdf-signature-line">sporzƒÖdzajƒÖcy</div>
                            <div class="pdf-signature-note">(podpis i pieczƒÖtka osoby upowa≈ºnionej)</div>
                        </div>
                        <div class="pdf-signature-box">
                            <div class="pdf-signature-line">akceptujƒÖcy</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Ustaw dzisiejszƒÖ datƒô jako domy≈õlnƒÖ
        document.addEventListener('DOMContentLoaded', function() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('nota_data').value = today;
            updatePreview();
        });

        // Aktualizuj podglƒÖd przy ka≈ºdej zmianie
        document.querySelectorAll('input, select').forEach(el => {
            el.addEventListener('input', updatePreview);
            el.addEventListener('change', updatePreview);
        });

        // Automatyczne generowanie kwoty s≈Çownie
        document.getElementById('kwota').addEventListener('input', function() {
            const kwota = parseFloat(this.value);
            if (!isNaN(kwota)) {
                document.getElementById('kwota_slownie').value = numberToWords(kwota);
            }
            updatePreview();
        });

        function updatePreview() {
            const getValue = (id) => document.getElementById(id).value || '___';
            const formatDate = (dateStr) => {
                if (!dateStr) return '___';
                const d = new Date(dateStr);
                return d.toLocaleDateString('pl-PL');
            };

            // PodglƒÖd
            document.getElementById('prev_firma').textContent = getValue('wystawca_nazwa');
            document.getElementById('prev_adres').textContent = getValue('wystawca_adres');
            document.getElementById('prev_numer').textContent = getValue('nota_numer');
            document.getElementById('prev_data').textContent = formatDate(document.getElementById('nota_data').value);
            document.getElementById('prev_typ').textContent = getValue('nota_typ');
            document.getElementById('prev_kwota').textContent = getValue('kwota');
            document.getElementById('prev_kwota2').textContent = getValue('kwota');
            document.getElementById('prev_slownie').textContent = getValue('kwota_slownie');
            document.getElementById('prev_rodzaj').textContent = getValue('szkoda_rodzaj');
            document.getElementById('prev_przesylka').textContent = getValue('przesylka_numer');
            document.getElementById('prev_przesylka_data').textContent = formatDate(document.getElementById('przesylka_data').value);
            document.getElementById('prev_konto').textContent = getValue('konto');
        }

        function numberToWords(number) {
            const jednosci = ['', 'jeden', 'dwa', 'trzy', 'cztery', 'piƒôƒá', 'sze≈õƒá', 'siedem', 'osiem', 'dziewiƒôƒá'];
            const nastki = ['dziesiƒôƒá', 'jedena≈õcie', 'dwana≈õcie', 'trzyna≈õcie', 'czterna≈õcie', 'piƒôtna≈õcie', 'szesna≈õcie', 'siedemna≈õcie', 'osiemna≈õcie', 'dziewiƒôtna≈õcie'];
            const dziesiatki = ['', 'dziesiƒôƒá', 'dwadzie≈õcia', 'trzydzie≈õci', 'czterdzie≈õci', 'piƒôƒádziesiƒÖt', 'sze≈õƒádziesiƒÖt', 'siedemdziesiƒÖt', 'osiemdziesiƒÖt', 'dziewiƒôƒádziesiƒÖt'];
            const setki = ['', 'sto', 'dwie≈õcie', 'trzysta', 'czterysta', 'piƒôƒáset', 'sze≈õƒáset', 'siedemset', 'osiemset', 'dziewiƒôƒáset'];

            if (number === 0) return 'zero z≈Çotych 00/100';

            const zlote = Math.floor(number);
            const grosze = Math.round((number - zlote) * 100);

            let result = '';

            // TysiƒÖce
            if (zlote >= 1000) {
                const tys = Math.floor(zlote / 1000);
                if (tys === 1) {
                    result += 'tysiƒÖc ';
                } else if (tys >= 2 && tys <= 4) {
                    result += jednosci[tys] + ' tysiƒÖce ';
                } else if (tys >= 5 && tys <= 9) {
                    result += jednosci[tys] + ' tysiƒôcy ';
                } else if (tys >= 10 && tys <= 19) {
                    result += nastki[tys - 10] + ' tysiƒôcy ';
                } else if (tys >= 20) {
                    const d = Math.floor(tys / 10);
                    const j = tys % 10;
                    result += dziesiatki[d] + ' ';
                    if (j > 0) {
                        if (j >= 2 && j <= 4) {
                            result += jednosci[j] + ' tysiƒÖce ';
                        } else {
                            result += jednosci[j] + ' tysiƒôcy ';
                        }
                    } else {
                        result += 'tysiƒôcy ';
                    }
                }
            }

            // Setki, dziesiƒÖtki, jedno≈õci
            const reszta = zlote % 1000;
            const s = Math.floor(reszta / 100);
            const d = Math.floor((reszta % 100) / 10);
            const j = reszta % 10;

            if (s > 0) result += setki[s] + ' ';

            if (d === 1) {
                result += nastki[j] + ' ';
            } else {
                if (d > 0) result += dziesiatki[d] + ' ';
                if (j > 0) result += jednosci[j] + ' ';
            }

            // Z≈Çotych
            const ostatnia = zlote % 10;
            const przedostatnia = Math.floor((zlote % 100) / 10);
            if (zlote === 1) {
                result += 'z≈Çoty';
            } else if (przedostatnia !== 1 && (ostatnia >= 2 && ostatnia <= 4)) {
                result += 'z≈Çote';
            } else {
                result += 'z≈Çotych';
            }

            // Grosze
            result += ' ' + grosze.toString().padStart(2, '0') + '/100';

            return result.trim();
        }

        function resetForm() {
            document.querySelectorAll('input:not([readonly]), select').forEach(el => {
                if (el.type === 'date') {
                    el.value = new Date().toISOString().split('T')[0];
                } else if (el.tagName === 'SELECT') {
                    el.selectedIndex = 0;
                } else {
                    el.value = '';
                }
            });
            updatePreview();
        }

        function generatePDF() {
            const element = document.getElementById('preview');
            const notaNumer = document.getElementById('nota_numer').value || 'nota';
            const notaData = document.getElementById('nota_data').value || new Date().toISOString().split('T')[0];

            const opt = {
                margin: [15, 15, 15, 15],
                filename: `Nota_ksiegowa_${notaNumer.replace(/\//g, '-')}_${notaData}.pdf`,
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { 
                    scale: 2,
                    useCORS: true,
                    logging: false,
                    backgroundColor: '#ffffff',
                    width: 800
                },
                jsPDF: { 
                    unit: 'mm', 
                    format: 'a4', 
                    orientation: 'portrait' 
                }
            };

            html2pdf().set(opt).from(element).save();
        }
    </script>
</body>
</html>
